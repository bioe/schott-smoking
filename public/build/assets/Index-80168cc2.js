import{r as j,v as A,c as d,a as r,u as s,w as c,F as m,o as a,X as B,b as f,t as n,d as t,g as C,e as u,f as p,I,h as b,i as U,p as D,j as L,O as M}from"./app-2ba7b198.js";import{P as T}from"./PrimaryButton-4270aeb5.js";import{H as S}from"./HeadRow-41228e2e.js";import{_ as $}from"./Paginate-7eaed52d.js";import{A as F}from"./AuthenticatedLayout-c9c4da75.js";import{f as V}from"./helper-449b5e06.js";import"./_plugin-vue_export-helper-c27b6911.js";const H={class:"my-3 p-3 bg-body rounded shadow-sm"},K=["onSubmit"],P={class:"row mb-3"},z={class:"col-md-3"},G={class:"form-floating mb-3"},R=t("label",{for:"keywordInput"},"Keyword",-1),X={class:"col-md-3"},Y={class:"form-floating mb-3"},q=t("label",{for:"startInput"},"Entry",-1),J={class:"col-md-3"},Q={class:"form-floating mb-3"},W=t("label",{for:"endInput"},"Exit",-1),Z={class:"col-md-3"},tt={class:"form-floating mb-3"},et=t("option",{value:null},"All",-1),ot=["value"],st=t("label",{for:"stationInput"},"Station",-1),lt={class:"col-md-3"},nt={class:"form-floating mb-3"},at=t("option",{value:null},"All",-1),dt=t("option",{value:"yes"},"Yes",-1),it=t("option",{value:"no"},"No",-1),rt=[at,dt,it],ct=t("label",{for:"stationInput"},"Overstay",-1),ut={class:"col-12"},_t=t("i",{class:"bi bi-search"},null,-1),mt={class:"table table-bordered table-striped table-hover"},ft={width:"10%"},pt=["onClick"],bt=t("i",{class:"bi bi-trash"},null,-1),ht=[bt],Ot={__name:"Index",props:{header:{type:Object},filters:{type:Object},list:{type:Object,default:()=>({})},station_list:{type:Object}},setup(i){const O=i,h="entrylogs",y=j("Entry Logs"),o=A(O.filters),E=_=>{o.sort.field=_,o.sort.direction=o.sort.direction==""||o.sort.direction=="desc"?"asc":"desc",v()},v=()=>{o.get(route(h+".index"),{preserveScroll:!0})},N=(_,l)=>{confirm(`Delete this entry ${l} ?`)&&M.delete(route(h+".destroy",_))};return(_,l)=>(a(),d(m,null,[r(s(B),{title:y.value},null,8,["title"]),r(F,null,{header:c(()=>[f(n(y.value),1)]),default:c(()=>[t("div",H,[t("form",{onSubmit:C(v,["prevent"])},[t("div",P,[t("div",z,[t("div",G,[u(t("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>s(o).keyword=e),type:"text",class:"form-control",id:"keywordInput",placeholder:"Keyword",autocomplete:"off"},null,512),[[p,s(o).keyword]]),R])]),t("div",X,[t("div",Y,[u(t("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>s(o).start=e),type:"date",class:"form-control",id:"startInput",placeholder:"Start",autocomplete:"off"},null,512),[[p,s(o).start]]),q])]),t("div",J,[t("div",Q,[u(t("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>s(o).end=e),type:"date",class:"form-control",id:"endInput",placeholder:"End",autocomplete:"off"},null,512),[[p,s(o).end]]),W])]),t("div",Z,[t("div",tt,[u(t("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>s(o).station_id=e),class:"form-select"},[et,(a(!0),d(m,null,b(i.station_list,e=>(a(),d("option",{value:e.id},n(e.name),9,ot))),256))],512),[[I,s(o).station_id]]),st])]),t("div",lt,[t("div",nt,[u(t("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>s(o).overstay=e),class:"form-select"},rt,512),[[I,s(o).overstay]]),ct])]),t("div",ut,[r(T,{type:"submit",disabled:s(o).processing},{default:c(()=>[_t,f(" Search ")]),_:1},8,["disabled"])])])],40,K),t("table",mt,[t("thead",null,[t("tr",null,[r(S,null,{default:c(()=>[f("Actions")]),_:1}),(a(!0),d(m,null,b(i.header,e=>(a(),U(S,{field:e.field,sort:e.sortable?i.filters.sort:null,onSortEvent:E,disabled:s(o).processing},{default:c(()=>[f(n(e.title),1)]),_:2},1032,["field","sort","disabled"]))),256))])]),t("tbody",null,[(a(!0),d(m,null,b(i.list.data,(e,yt)=>{var g,w,x;return a(),d("tr",null,[t("td",ft,[e.can_delete_entry?(a(),d("button",{key:0,onClick:vt=>{var k;return N(e.id,(k=e.employee)==null?void 0:k.card_id)},class:"btn btn-sm btn-link"},ht,8,pt)):D("",!0)]),t("td",null,n((g=e.employee)==null?void 0:g.card_id),1),t("td",null,n((w=e.employee)==null?void 0:w.name),1),t("td",null,n((x=e.station)==null?void 0:x.name),1),t("td",null,n(s(V)(e.enter_time)),1),t("td",null,n(s(V)(e.exit_time)),1),t("td",{class:L(e.overstay_seconds>0?"text-danger":"")},n(e.stay_label),3)])}),256))])]),r($,{data:i.list},null,8,["data"])])]),_:1})],64))}};export{Ot as default};
